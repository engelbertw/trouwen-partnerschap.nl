# Getuigen Flow - Visual Guide

## ğŸ“± User Journey

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Dossier Overview                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Openstaande acties:                                  â”‚  â”‚
â”‚  â”‚  âœ“ Plan jullie ceremonie                             â”‚  â”‚
â”‚  â”‚  â†’ Geef jullie getuigen door          [Click here]   â”‚  â”‚
â”‚  â”‚  â—‹ Kies welke documenten jullie willen ontvangen     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Introduction Page - First Time                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Inleiding                                            â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  Met dit formulier geeft u de getuigen voor uw       â”‚  â”‚
â”‚  â”‚  ceremonie door.                                      â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  Wat u doet in dit formulier:                        â”‚  â”‚
â”‚  â”‚  â€¢ U vult de namen van uw getuigen in (2-4)          â”‚  â”‚
â”‚  â”‚  â€¢ U stuurt een kopie van hun ID op                  â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  [Start met getuigen doorgeven â†’]                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Getuigen Form                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Getuige 1                                            â”‚  â”‚
â”‚  â”‚  Voornamen: [Anna Helena Elisabeth]                  â”‚  â”‚
â”‚  â”‚  Achternaam: [Janssen]                               â”‚  â”‚
â”‚  â”‚  Geboortedatum: [23-05-1990] ğŸ“…                      â”‚  â”‚
â”‚  â”‚  [ğŸ“„ Paspoort_Anna_Janssen.pdf] âœ“ Upload geslaagd   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Getuige 2                                            â”‚  â”‚
â”‚  â”‚  Voornamen: [Sophie]                                  â”‚  â”‚
â”‚  â”‚  Achternaam: [de Vries]                              â”‚  â”‚
â”‚  â”‚  Geboortedatum: [02-03-1990] ğŸ“…                      â”‚  â”‚
â”‚  â”‚  [ğŸ“„ identiteitsbewijs-sophiedevries.pdf] âœ“         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  [+ Getuige toevoegen]                                     â”‚
â”‚                                                             â”‚
â”‚  [â† Vorige stap]            [Opslaan en sluiten]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Validation - Client Side                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  âš ï¸ Controleer uw invoer                              â”‚  â”‚
â”‚  â”‚  â€¢ De getuige moet op de datum van de ceremonie      â”‚  â”‚
â”‚  â”‚    minimaal 18 jaar oud zijn                          â”‚  â”‚
â”‚  â”‚  â€¢ Voer de voornamen van de getuige in               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  [Validation runs BEFORE API call]                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 API Processing                              â”‚
â”‚  POST /api/dossier/[id]/getuigen                           â”‚
â”‚                                                             â”‚
â”‚  1. âœ“ Authentication (Clerk)                               â”‚
â”‚  2. âœ“ Authorization (User owns dossier)                    â”‚
â”‚  3. âœ“ Validate count (2-4 getuigen)                        â”‚
â”‚  4. âœ“ Delete existing witnesses                            â”‚
â”‚  5. âœ“ Insert new witnesses                                 â”‚
â”‚  6. âœ“ Update dossier_block status                          â”‚
â”‚                                                             â”‚
â”‚  Database: ihw.getuige                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ id | dossier_id | voornamen | achternaam | ...     â”‚   â”‚
â”‚  â”‚ uuid | uuid | Anna Helena Elisabeth | Janssen | ... â”‚   â”‚
â”‚  â”‚ uuid | uuid | Sophie | de Vries | ...               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Back to Dossier                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Openstaande acties:                                  â”‚  â”‚
â”‚  â”‚  âœ“ Plan jullie ceremonie                             â”‚  â”‚
â”‚  â”‚  âœ“ Geef jullie getuigen door        [Completed! âœ“]  â”‚  â”‚
â”‚  â”‚  â†’ Kies welke documenten jullie willen ontvangen     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  Getuigen Section:                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Naam                    Geboortedatum                â”‚  â”‚
â”‚  â”‚  Anna Helena Elisabeth   23-05-1990                   â”‚  â”‚
â”‚  â”‚  Sophie de Vries         02-03-1990                   â”‚  â”‚
â”‚  â”‚  Miguel Vega SÃ¡nchez     26-05-1988                   â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  [âœï¸ Getuigen wijzigen]                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser    â”‚
â”‚  (React UI)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 1. Load page
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GET /api/dossier/[id]/getuigen  â”‚
â”‚  â€¢ Check auth (Clerk)            â”‚
â”‚  â€¢ Fetch witnesses from DB       â”‚
â”‚  â€¢ Return formatted data         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ 2. Witnesses data
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser    â”‚
â”‚ Fills form   â”‚
â”‚ with data    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 3. User edits
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Validation  â”‚
â”‚   Library    â”‚
â”‚ (Client)     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 4. Validation passes
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  POST /api/dossier/[id]/getuigen  â”‚
â”‚  â€¢ Validate auth                  â”‚
â”‚  â€¢ Validate data (2-4 witnesses)  â”‚
â”‚  â€¢ DELETE old witnesses           â”‚
â”‚  â€¢ INSERT new witnesses           â”‚
â”‚  â€¢ UPDATE dossier_block           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ 5. Success
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PostgreSQL  â”‚
â”‚  (Neon)      â”‚
â”‚              â”‚
â”‚  ihw.getuige â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Record1 â”‚ â”‚
â”‚  â”‚ Record2 â”‚ â”‚
â”‚  â”‚ Record3 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Database Schema

```sql
-- Schema: ihw (Integrated Wedding System)
-- Table: getuige (Witness)

CREATE TABLE ihw.getuige (
    -- Primary Key
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    
    -- Foreign Keys
    dossier_id UUID NOT NULL 
        REFERENCES ihw.dossier(id) ON DELETE CASCADE,
    gemeente_oin TEXT NOT NULL 
        REFERENCES ihw.gemeente(oin),
    
    -- Witness Type
    is_gemeentelijke_getuige BOOLEAN NOT NULL DEFAULT FALSE,
    
    -- Personal Information
    voornamen TEXT NOT NULL,
    voorvoegsel TEXT,
    achternaam TEXT NOT NULL,
    geboortedatum DATE NOT NULL,
    geboorteplaats TEXT,
    
    -- Document Management
    document_upload_id UUID,
    document_status papier_status DEFAULT 'ontbreekt',
    
    -- Ordering
    volgorde INTEGER NOT NULL DEFAULT 1,
    
    -- Timestamps
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW()
);

-- Indexes
CREATE INDEX idx_getuige_dossier_id ON ihw.getuige(dossier_id);
CREATE INDEX idx_getuige_gemeente_oin ON ihw.getuige(gemeente_oin);
CREATE INDEX idx_getuige_volgorde ON ihw.getuige(dossier_id, volgorde);
```

## âœ… Validation Rules

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Validation Rules                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  GETUIGE_VOORNAMEN_VEREIST                             â”‚
â”‚  â†’ Voornamen veld mag niet leeg zijn                   â”‚
â”‚                                                         â”‚
â”‚  GETUIGE_ACHTERNAAM_VEREIST                            â”‚
â”‚  â†’ Achternaam veld mag niet leeg zijn                  â”‚
â”‚                                                         â”‚
â”‚  GETUIGE_GEBOORTEDATUM_VEREIST                         â”‚
â”‚  â†’ Geboortedatum veld mag niet leeg zijn               â”‚
â”‚                                                         â”‚
â”‚  GETUIGE_GEBOORTEDATUM_FORMAAT                         â”‚
â”‚  â†’ Formaat: DD-MM-JJJJ (bijv. 15-03-1990)              â”‚
â”‚                                                         â”‚
â”‚  GETUIGE_MIN_LEEFTIJD                                  â”‚
â”‚  â†’ Minimale leeftijd: 18 jaar (nu)                     â”‚
â”‚  â†’ Priority: 1 (kritisch)                              â”‚
â”‚                                                         â”‚
â”‚  GETUIGE_MIN_LEEFTIJD_HUWELIJK                         â”‚
â”‚  â†’ Minimale leeftijd: 18 jaar (op ceremonie datum)     â”‚
â”‚  â†’ Priority: 1 (kritisch)                              â”‚
â”‚                                                         â”‚
â”‚  GETUIGE_MAX_LEEFTIJD                                  â”‚
â”‚  â†’ Maximale leeftijd: 150 jaar                         â”‚
â”‚  â†’ Priority: 1 (kritisch)                              â”‚
â”‚                                                         â”‚
â”‚  GETUIGE_HOGE_LEEFTIJD                                 â”‚
â”‚  â†’ Waarschuwing: leeftijd > 100 jaar                   â”‚
â”‚  â†’ Type: warning                                       â”‚
â”‚                                                         â”‚
â”‚  GETUIGEN_MIN_AANTAL                                   â”‚
â”‚  â†’ Minimaal aantal getuigen: 2                         â”‚
â”‚  â†’ Priority: 1 (kritisch)                              â”‚
â”‚                                                         â”‚
â”‚  GETUIGEN_MAX_AANTAL                                   â”‚
â”‚  â†’ Maximaal aantal getuigen: 4                         â”‚
â”‚  â†’ Priority: 1 (kritisch)                              â”‚
â”‚                                                         â”‚
â”‚  XSS & SQL Injection Prevention                        â”‚
â”‚  â†’ Automatisch op alle tekstvelden                     â”‚
â”‚  â†’ Priority: 1 (kritisch)                              â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¨ UI Components

### Error Display (Red)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸  Controleer uw invoer                           â”‚
â”‚                                                    â”‚
â”‚  â€¢ De getuige moet minimaal 18 jaar oud zijn      â”‚
â”‚  â€¢ Voer de achternaam van de getuige in           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Warning Display (Yellow)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸  Let op                                          â”‚
â”‚                                                    â”‚
â”‚  â€¢ Controleer de geboortedatum - deze lijkt       â”‚
â”‚    onwaarschijnlijk oud                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Success State
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ“ Alle acties voltooid                            â”‚
â”‚                                                    â”‚
â”‚   U heeft alle openstaande acties voltooid.       â”‚
â”‚   Uw dossier is klaar voor verdere verwerking.    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Security Features

```
Authentication (Clerk)
â”œâ”€ JWT validation
â”œâ”€ Session management
â””â”€ User identity verification

Authorization
â”œâ”€ Dossier ownership check
â”œâ”€ Multi-tenancy (gemeenteOin)
â””â”€ Role-based access (future)

Input Validation
â”œâ”€ XSS prevention
â”œâ”€ SQL injection prevention
â”œâ”€ Type checking
â””â”€ Length limits

Data Protection
â”œâ”€ HTTPS only
â”œâ”€ Parameterized queries
â”œâ”€ GDPR compliance
â””â”€ Data minimization
```

## ğŸ“ˆ Performance Optimizations

- **Client-side validation first**: Prevents unnecessary API calls
- **Batch updates**: All witnesses updated in single transaction
- **Indexed queries**: Fast lookups by dossier_id
- **Connection pooling**: Drizzle ORM with Neon
- **Optimistic UI updates**: Immediate feedback to user
- **Error boundaries**: Graceful error handling

## ğŸ¯ Future Enhancements

1. **Real-time validation**: As user types
2. **Auto-save drafts**: Every 30 seconds
3. **Duplicate detection**: Check if witness already exists
4. **Address lookup**: BAG API integration
5. **ID verification**: Automatic ID validation
6. **Digital signatures**: E-signature for witnesses
7. **Mobile app**: Native iOS/Android
8. **Accessibility**: Enhanced screen reader support
9. **Multi-language**: English, German, French
10. **Analytics**: Track completion rates

